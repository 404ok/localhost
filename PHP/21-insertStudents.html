<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../bootstrap/css/bootstrap.min.css">
    <script src="./ajax.js"></script>
    <script>
        /* 
            form表单点击submit有提交功能
                        ajax也有提交功能
                    二者不一样(选其一)：
                    表单会自动编译跳转，需要跳转页面
                    ajax 异步进行数据传输
            
                    整个逻辑：
                        1.html    输入表单内容
                        2.通过ajax进行post提交到php页面
                        3.php通过$_POST拿到全局数组数据
                        4.将全局数组数据一个一个插在数据库里面
                        5.把插入成功与否返回前台，前台从success里面拿到

         */
         window.onload = function(){
             var submit = document.getElementById('submit');
             //将所有input框都要拿到
             var inputs = document.getElementsByTagName("input");
             submit.onclick = function(){
                //拿到input和submit,通过ajax提交数据
                
                $ajax({
                    method:"post",
                    //传到这个路劲的php文件下
                    url:"./insertStudents.php",
                    //将输入框的内容传过去
                    data:{
                        name:inputs[0].value,
                        math:inputs[1].value,
                        english:inputs[2].value,
                        chinese:inputs[3].value,
                    },
                    success:function(result){
                        //将返回的json格式的字符串转成对应的对象
                        var obj = JSON.parse(result);
                        alert(obj.message);
                    },
                    error:function(msg){
                        alert(msg);
                    }
                })

             }
         }
    </script>
</head>
<body>
    <div class="container">
        <!-- 实现面板 -->
        <div class="panel panel-primary">
            <!-- 头这部分 -->
            <div class="panel-heading">
                <h2>登入学员信息</h2>
            </div>
            <div class="panel-body">
                <!-- 
                    通过表单提交数据
                -->
                <div class="form-group">
                    <label for="name">学员姓名:</label>
                    <input type="text"class="form-control" name='name'>
                </div>
                <div class="form-group">
                    <label for="name">数学成绩:</label>
                    <input type="text"class="form-control" name='math'>
                </div>
                <div class="form-group">
                    <label for="name">英语成绩:</label>
                    <input type="text"class="form-control" name='english'>
                </div>
                <div class="form-group">
                    <label for="name">语文成绩:</label>
                    <input type="text"class="form-control" name='chinese'>
                </div>
                <!-- 提交按钮 -->
                <div class="form-group">
                    <button id="submit" class="
                    btn btn-primary form-control">提交学员成绩</button>
                </div>
            </div>
            <div class="panel-footer">
                <a href="./19-showStudents2.0.html">查看学员成绩</a>
            </div>
        </div>
    </div>
</body>
</html>